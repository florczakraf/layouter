<html>

<head>
    <meta charset="UTF-8">
    <style>
        body {
            background-color: powderblue;
            color: black;
            overflow: hidden;
            margin: 0px;
            padding: 0px;
        }

        .invisible {
            display: none;
        }

        #canvas {
            width: 2560px;
            height: 1440px;
        }
    </style>
    <script>
        const W = 2560;
        const H = 1440;
        const MAX_SIZE = 250;
        const MIN_SIZE = 200;
        Array.prototype.sample = function () { return this[Math.floor(Math.random() * this.length)] }
        let IMGS = new Array();
        let IMGS2 = new Array();
        // echo -n '["'; ls -q1 | paste -sd, - | sed 's/,/\", \"/g' | tr -d '\n'; echo '"]'
        IMG_NAMES = ["50 cent.png", "adam małysz.png", "adam słodowy.png", "agatka.jpg", "alan-rickman-2.jpg", "alan-rickman.jpg", "alice cooper.png", "andrzej gołota.png", "andrzej grabarczyk.png", "andrzej grabowski.png", "andrzej nejman.png", "andrzej piaseczny.png", "andrzej strzelecki.png", "angus macgyver.png", "anna jurksztowicz.png", "anna maria wesołowska.png", "artur.jpg", "avgn-2.png", "avgn.png", "bb-king.jpg", "beata-kozidrak.jpg", "bill hader.png", "billy herrington.png", "bob ross.png", "boguslaw-linda.jpg", "bogusław linda.png", "bolesław prus.png", "borat.jpg", "borys szyc.png", "bożena dykiel.png", "bozena_dykiel_space_glasses.png", "brad-pitt.jpg", "britney spears.png", "bronisław cieślak.png", "bruce-campbell.jpg", "bruce dickinson.png", "bruce-lee.jpg", "bruce-willis.jpg", "captain disillusion.png", "chada.png", "chajzer.jpg", "chazo.png", "chopin.jpg", "chris parnell.png", "chris rea.png", "christoph-waltz.jpg", "ciemny żmij au.png", "cubanpete.png", "cyndi lauper.png", "czeslaw-majewski.jpg", "czesław niemen.png", "danny-trejo.jpg", "danuta rinn.png", "david-hasselhoff.jpg", "dexterw.jpg", "diana ross.png", "dicaprio.jpg", "dio.png", "doda.png", "doge.png", "doktornauk.png", "dolce.png", "dolly parton.png", "dumbledorez.png", "dwayne the rock johnson.png", "eddie murphy.png", "ed sheeran.png", "elon musk.png", "elvis presley.png", "enrico-palazzo.jpg", "erdo.png", "eric clapton.png", "fatboy slim.png", "frank zappa.png", "fred armisen.png", "freddie mercury.png", "fronczewski.jpg", "gajus-ceplus.webp", "gloria estefan.png", "grumpy cat.png", "grzegorz-markowski.jpg", "harrison-ford.jpg", "henryk machalica.png", "hogan.jpg", "hugh-laurie.jpg", "ibisz.jpg", "jacek-kaczmarski.jpg", "jacek-stachursky.jpg", "jack black.png", "james rolfe.png", "jan borysewicz.png", "janczak.jpg", "jan englert.png", "jan frycz.png", "jan-machulski.jpg", "janusz józefowicz.png", "janusz rewiński.png", "janusz-tracz.jpg", "janusz-tylman.jpg", "jaroslaw-boberek.jpg", "jarosław jakimowicz.png", "jarosław kret.png", "jatowidzialem.png", "jean-claude-van-damme.jpg", "jerzy bończak.png", "jerzy-stuhr.jpg", "jerzy trela.png", "jimi hendrix.png", "jim morrison.png", "jimmy fallon.png", "joe-pesci.jpg", "johhny-sins.jpg", "john cena.png", "johnny lee miller.png", "john-travolta.jpg", "julian tuwim.png", "kaja paschalska.png", "kamil steinbach.png", "karol-krawczyk.jpg", "karol-strasburger.jpg", "katarzyna figura.png", "kayah.jpg", "kazik.png", "kazimierz kaczor.png", "keanu-reeves.jpg", "kennan thompson.png", "kiryu kazuma.png", "klocuch.png", "kombii-skawinski.jpg", "kopernik.jpg", "kora.jpg", "kraina-grzybow.jpg", "kristen wiig.png", "krystyna-czubowna.jpg", "krystyna janda.png", "krzysztof-cugowski.jpg", "krzysztof kiersznowski.png", "krzysztof-krawczyk.jpg", "kuba klawiter.png", "kula.jpg", "lady gaga.png", "laura branigan.png", "lech dyblik.png", "lemmy kilmister.png", "leon niemczyk.png", "lordi.jpg", "louis armstrong.png", "louis-de-funes.jpg", "lrp.png", "lucy liu.png", "maciej-gudowski.jpg", "madonna.png", "mads-mikkelsen.jpg", "majka-jezowska.jpg", "maklowicz.jpg", "mandaryna.png", "marcin dorociński.png", "marek grechuta.png", "marek kondrat.png", "marek-perepeczko.jpg", "marek sierocki.png", "maria konopnicka.png", "mariusz pudzianowski.png", "mariya takeuchi.png", "mark knopfler.png", "marnypopis.png", "marvin gaye.png", "maryla-rodowicz.jpg", "mary-za-ciemno.jpg", "michael bolton.png", "michael jackson nowy.png", "michael jackson stary.png", "michael stevens (vsauce).png", "michał białek.png", "michal-milowicz.jpg", "michał milowicz.png", "michał wiśniewski.png", "mieczysław fogg.png", "mike myers.png", "mirosław baka.png", "mirosław zbrojewicz.png", "morgan-freeman.jpg", "nick-boulder.jpg", "nina-simone.jpg", "norbi.png", "norek.png", "ojciec-mateusz.jpg", "olaf lubaszenko.png", "olonb.png", "owsiak.jpg", "ozzy-osbourne.jpg", "panmieciu.jpg", "paweł wawrzecki.png", "phil collins 1.png", "phil collins 2.png", "phoebe z friends.png", "piotr adamczyk.png", "piotr fronczewski.png", "pkr.png", "ps1hagrid.jpg", "radek-kotarski.jpg", "rafał brzozowski.png", "rick-astely-2.jpg", "rick-astley.jpg", "rick-james.jpg", "rick-moranis.jpg", "robert burneika.png", "robert-de-niro.jpg", "robert janowski.png", "robert lewandowski.png", "robert więckiewicz.png", "rob halford.png", "ronald jenkees.png", "rowan-atkinson.jpg", "rudi-schuberth.jpg", "rysiek riedel.png", "ryszard-rynkowski.jpg", "sarah silverman.png", "schwarzenegger.jpg", "sebastian wątroba.png", "seweryn krajewski.png", "shatner2.jpg", "shatner.jpg", "sidney-polak.jpg", "skryba.png", "slash.png", "sławomir orzechowski.png", "so-cool.png", "stanisława ryster.png", "stanisław tym.png", "steve-buscemi.jpg", "steven-van-zandt.jpg", "sting.png", "sylvester-stallone.jpg", "szymon wydra.png", "tadeusz sznuk.png", "tak-srednio-bym-powiedzial.jpg", "testo2.png", "testo.png", "tim-roth.jpg", "tomasz karolak.png", "tomasz-knapik.jpg", "tomasz niecik.png", "tom-hanks.jpg", "tommy-lee-jones.jpg", "tommy-vercetti.jpg", "tom-scott.jpg", "tumulec.jpg", "tu-sie-jebnij.jpg", "vanessa bayer.png", "wally.png", "wanda jackson.png", "weird al yankovic.png", "werner3.png", "wide-peepo-gladiator.png", "wislawa-szymborska.jpg", "wladyslaw-bartoszewski.jpg", "wojciech-kilar.jpg", "wojciech-mann.jpg", "wsciekly-waz.jpg", "xardas.jpg", "zaborski.jpg", "zamachowski.jpg", "zbigniew buczkowski.png", "zbigniew-religa.jpg", "zbigniew-wodecki-2.jpg", "zbigniew-wodecki.jpg"];
        IMG_NAMES.forEach(img => {
            let img_elem = new Image();
            img_elem.onload = () => {
                IMGS.push(img_elem);
            }
            img_elem.src = `layout_imgs/${img}`;
        })

        function sleep (time) {
            return new Promise((resolve) => setTimeout(resolve, time));
        }

        function just_draw(canvas, img, x, y) {
            canvas.drawImage(img, x, y);
        }

        function draw_left_to_right(canvas, img, x, y) {
            for (let i = 1; i <= img.width; i++) {
                sleep(i).then(() => {
                    canvas.drawImage(
                        img,
                        0, 0,
                        i, img.height,
                        x, y,
                        i, img.height
                    );
                });
            }
        }

        function draw_top_to_bottom(canvas, img, x, y) {
            for (let i = 1; i <= img.height; i++) {
                sleep(i).then(() => {
                    canvas.drawImage(
                        img,
                        0, 0,
                        img.width, i,
                        x, y,
                        img.width, i
                    );
                });
            }
        }

        function draw_right_to_left(canvas, img, x, y) {
            for (let i = 1; i <= img.width; i++) {
                sleep(i).then(() => {
                    canvas.drawImage(
                        img,
                        img.width - i, 0,
                        i, img.height,
                        x + img.width - i, y,
                        i, img.height
                     );
                });
            }
        }

        function draw_bottom_to_top(canvas, img, x, y) {
            for (let i = 1; i <= img.height; i++) {
                sleep(i).then(() => {
                    canvas.drawImage(
                        img,
                        0, img.height - i,
                        img.width, i,
                        x, y + img.height - i,
                        img.width, i
                    );
                });
            }
        }

        function draw_middle_out_vertically(canvas, img, x, y) {
            let steps = 200;
            let step_x = img.width / steps;
            let step_y = img.height / steps;

            for (let i = 1; i <= steps; i++) {
                sleep(i).then(() => {
                    canvas.drawImage(
                        img,
                        0, img.height / 2 - (i * step_y / 2),
                        img.width, i * step_y,
                        x, y + img.height / 2 - i * step_y / 2,
                        img.width, i * step_y
                    );
                });
            }
        }

        function draw_middle_out_horizontally(canvas, img, x, y) {
            let steps = 200;
            let step_x = img.width / steps;
            let step_y = img.height / steps;

            for (let i = 1; i <= steps; i++) {
                sleep(i).then(() => {
                    canvas.drawImage(
                        img,
                        img.width / 2 - (i * step_x / 2), 0,
                        i * step_x, img.height,
                        x + img.width / 2 - i * step_x / 2, y,
                        i * step_x, img.height
                    );
                });
            }
        }

        function draw_middle_out(canvas, img, x, y) {
            let steps = 200;
            let step_x = img.width / steps;
            let step_y = img.height / steps;

            for (let i = 1; i <= steps; i++) {
                sleep(i).then(() => {
                    canvas.drawImage(
                        img,
                        img.width / 2 - (i * step_x / 2), img.height / 2 - (i * step_y / 2),
                        i * step_x, i * step_y,
                        x + img.width / 2 - i * step_x / 2, y + img.height / 2 - i * step_y / 2,
                        i * step_x, i * step_y
                    );
                });
            }
        }

        function draw_snake_chunk(canvas, img, x, y, i, j, steps, rtl) {
            if (j >= steps) {
                return;
            }

            let step_x = img.width / steps;
            let step_y = img.height / steps;

            canvas.drawImage(
                img,
                i * step_x, j * step_y,
                step_x, step_y,
                x + i * step_x, y + j * step_y,
                step_x, step_y
            );

            i = i + (rtl ? -1 : 1);

            if (i == steps){
                rtl = !rtl;
                i--;
                j++;
            }
            else if (i == -1) {
                rtl = !rtl;
                i++;
                j++;
            }

            sleep(20).then(() => draw_snake_chunk(canvas, img, x, y, i, j, steps, rtl));
        }

        function draw_snake(canvas, img, x, y) {
            let steps = 5;
            draw_snake_chunk(canvas, img, x, y, 0, 0, steps, false);
        }

        function draw_zoom_middle_out(canvas, img, x, y) {
            let steps = 500;
            let step_x = img.width / steps;
            let step_y = img.height / steps;

            for (let i = 1; i <= steps; i++) {
                sleep(i).then(() => {
                    canvas.drawImage(
                        img,
                        0, 0,
                        img.width, img.height,
                        x + img.width / 2 - i * step_x / 2, y + img.height / 2 - i * step_y / 2,
                        i * step_x, i * step_y
                    );
                });
            }
        }

        let draw_functions = [
            just_draw,
            draw_left_to_right,
            draw_top_to_bottom,
            draw_right_to_left,
            draw_bottom_to_top,
            draw_middle_out_vertically,
            draw_middle_out_horizontally,
            draw_middle_out,
            draw_snake,
            draw_zoom_middle_out,
        ];

    </script>
</head>

<body>
    <canvas id="canvas" width="2560" height="1440"></canvas>
    <script>
        canvas = document.getElementById("canvas").getContext("2d");
        document.addEventListener("DOMContentLoaded", function () {
            setInterval(() => {
                let img = IMGS.sample();
                if (!img) {
                    if (IMGS2.length != IMG_NAMES.length) {
                        alert("dupa")
                    }
                    IMGS = IMGS2;
                    IMGS2 = new Array();
                    img = IMGS.sample();
                }
                IMGS.splice(IMGS.indexOf(img), 1);
                IMGS2.push(img);

                let x = Math.floor(Math.random() * W);
                let y = Math.floor(Math.random() * H);

                if (img.width <= MAX_SIZE && img.height <= MAX_SIZE) {
                    if (x + img.width > W) {
                        x = W - img.width;
                    }

                    if (y + img.height > H) {
                        y = H - img.height;
                    }

                    draw_functions.sample()(canvas, img, x, y);
                    return;
                }

                let ratio = img.width / img.height;
                let new_width, new_height;
                const bigger_size = MIN_SIZE + Math.floor(Math.random() * (MAX_SIZE - MIN_SIZE));

                if (img.width >= img.height) {
                    new_width = bigger_size;
                    new_height = Math.floor(new_width / ratio);
                }
                else {
                    new_height = bigger_size;
                    new_width = Math.floor(new_height * ratio);
                }

                createImageBitmap(
                    img,
                    { resizeWidth: new_width, resizeHeight: new_height, resizeQuality: 'high' }
                )
                    .then(new_img => {
                        if (x + new_width > W) {
                            x = W - new_width;
                        }

                        if (y + new_height > H) {
                            y = H - new_height;
                        }

                        draw_functions.sample()(canvas, new_img, x, y);

                    }
                    );


            }, 1000);

        }, false);
    </script>
</body>

</html>
